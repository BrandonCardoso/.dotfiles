[colors]
background = #D8282a36
foreground = #f8f8f2
black      = #44475a
gray       = #6272a4
cyan       = #8be9fd
green      = #50fa7b
orange     = #ffb86c
pink       = #ff79c6
purple     = #bd93f9
red        = #ff5555
yellow     = #f1fa8c


[global/wm]
margin-top = 0
margin-bottom = 0


[settings]
format-padding = 2
format-spacing = 2


[bar/bottom]
wm-restack = bspwm
bottom = true
width = 100%
height = 36
background = ${colors.background}
foreground = ${colors.foreground}
enable-ipc = true
line-size = 4

modules-left = workspaces title
modules-center = spotify spotify-prev spotify-play-pause spotify-next
modules-right = pulseaudio temperature-cpu temperature-gpu wired-network calendar powermenu

tray-position = right
tray-detached = false
tray-background = ${colors.background}
tray-offset-y = 0

font-0 = Noto Sans CJK JP: style=Regular: pixelsize=12; 2
font-1 = Noto Sans Mono: Code: style=Regular: pixelsize=13; 2
font-2 = Material Icons: style=Regular: pixelsize=14; 4


[module/workspaces]
type = internal/bspwm
pin-workspaces = true
inline-mode = false
enable-scroll = false

format-prefix = " "

label-urgent = %{T2}%name%%{T}
label-urgent-padding = 4
label-urgent-underline = ${colors.yellow}

label-focused = %{T2}%name%%{T}
label-focused-padding = 4
label-focused-underline = ${colors.purple}

label-occupied = %{T2}%name%%{T}
label-occupied-padding = 4

label-empty =


[module/title]
type = internal/xwindow
label = %title:0:128:...% %{A1:bspc node -c:}  %{A}
label-empty =


[module/spotify]
type = custom/script
tail = true
; prefix symbol is shown before the text
format-prefix = "%{T3} %{T}"
format-prefix-foreground = ${colors.green}
format = <label>
exec = ~/.config/polybar/scripts/spotify_status.sh


[module/spotify-prev]
type = custom/script
exec = echo "%{T3}%{T}"
format = <label>
click-left = playerctl previous spotify


[module/spotify-play-pause]
type = custom/ipc
hook-0 = echo "%{T3}%{T}"
hook-1 = echo "%{T3}%{T}"
initial = 1
click-left = playerctl play-pause spotify


[module/spotify-next]
type = custom/script
exec = echo "%{T3}%{T}"
format = <label>
click-left = playerctl next spotify


[module/temperature-cpu]
type = internal/temperature
interval = 2
hwmon-path = ${env:HWMON_PATH}
label = CPU %temperature-c%
label-foreground = ${colors.cyan}
format-prefix = "%{T3}%{T}"
format-prefix-foreground = ${colors.cyan}
format-margin = 0


[module/temperature-gpu]
type = custom/script
interval = 2
exec = nvidia-smi --query-gpu=temperature.gpu --format=csv,noheader,nounits
label = GPU %output%°C
label-foreground = ${colors.cyan}
format-offset = 0


[module/pulseaudio]
type = custom/script
tail = true
format-foreground = ${colors.purple}
exec = ~/.config/polybar/scripts/polybar-pulseaudio-control/pulseaudio-control.bash --icons-volume ",," --icon-muted "" --format='%{T3}$VOL_ICON%{T} ${VOL_LEVEL}%' listen
click-left = ~/.config/polybar/scripts/polybar-pulseaudio-control/pulseaudio-control.bash togmute
click-middle = ~/.config/polybar/scripts/polybar-pulseaudio-control/pulseaudio-control.bash next-sink
click-right = exec pavucontrol &
scroll-up = ~/.config/polybar/scripts/polybar-pulseaudio-control/pulseaudio-control.bash --volume-max 130 --volume-step 5 up
scroll-down = ~/.config/polybar/scripts/polybar-pulseaudio-control/pulseaudio-control.bash --volume-max 130 --volume-step 5 down


[module/wired-network]
type = internal/network
interface = enp9s0
interval = 3.0
unknown-as-up = true
format-connected = <label-connected>
label-connected = %{T3}%{T}
label-connected-foreground = ${colors.green}
label-diconnected = %{T3}%{T}
label-disconnected-foreground = ${colors.red}


[module/calendar]
type = custom/script
exec = ~/.config/polybar/scripts/calendar.sh
interval = 1
click-left = ~/.config/polybar/scripts/calendar.sh --popup &


[module/powermenu]
type = custom/menu
expand-right = false

label-open = "%{T3}%{T}"
label-open-foreground = ${colors.yellow}
label-close = "%{T3}%{T}"
label-close-foreground = ${colors.red}
label-separator = "/"
label-separator-foreground = ${colors.foreground}

menu-0-foreground = ${colors.yellow}
menu-0-0 = "Poweroff"
menu-0-0-exec = #powermenu.open.1
menu-0-1 = "Reboot"
menu-0-1-exec = #powermenu.open.2
menu-0-2 = "Logout"
menu-0-2-exec = #powermenu.open.3

menu-1-0 = "Poweroff?"
menu-1-1 = "%{T3}%{T}"
menu-1-1-exec = "shutdown 0"
menu-1-1-foreground = ${colors.green}

menu-2-0 = "Reboot?"
menu-2-1 = "%{T3}%{T}"
menu-2-1-exec = "reboot"
menu-2-1-foreground = ${colors.green}

menu-3-0 = "Logout?"
menu-3-1 = "%{T3}%{T}"
menu-3-1-exec = "bspc quit"
menu-3-1-foreground = ${colors.green}
